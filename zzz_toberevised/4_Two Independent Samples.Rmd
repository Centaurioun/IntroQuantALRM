---
title: "Two independent samples"
author: "Kristopher Kyle"
date: "2/27/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Measuring differences between two independent samples (t-test, Wilcoxon test)
In applied linguistics research, we often want to know whether two independent groups differ with regard to some measure of success. For example, we might have reason to beleive that a particular teaching method will lead to larger vocabulary learning gains than another. In order to test this hypothesis, we could teach Class A using a particular method (e.g., rote memorization of form-meaning pairs) and Class B with our super-special method. At the end of the instruction period, we would then give each group an identical post-test. In order to determine whether one teaching method led to better test scores than the other, we would conduct a independent samples difference test (e.g., a t-test or a Wilcoxon test).

### Conducting an independent samples t-test: Assumptions
Independent samples t-tests are rather simple tests that use the sample means and the variance in each sample to determine the probability that the two samples are part of the same population.

Following are the assumptions for an independent samples t-test:

- The observations must be independent (within each sample)
- Each sample is normally distributed, and the variance is equal across samples
- There is only one comparison (an ANOVA is appropriate for multiple comparisons, stay tuned)
- The data do not represent repeated measures (i.e., pre- and post- test scores from the same individuals)
- The data is continuous

### Conducting an independent samples t-test: Visualizing the data
There are many ways to visualize an independent samples test. Below are three options. Note that this tutorial presumes that you have already checked for assumptions.

First, lets load some data:
``` {r}
mydata <- read.csv("data/distribution_sample.csv", header = TRUE)
summary(mydata)
```

Then, we will load some necessary packages (don't forget to install them if you haven't already!):
``` {r}
library(ggplot2) #normal ggplot
library(ggpubr) #ggplot add-on
library(psych) #psych package
```

First, we will create a box plot. As we see, the mean scores between the two prompts appear to be very similar.

``` {r}
#basic boxplot
ggplot(mydata, aes(x=Prompt,y=Score)) +
  geom_boxplot()+
  geom_jitter(shape=16, position=position_jitter(0.2), color = "grey")
```

Next, we will make overlapping density plots that allow us to see both the shape of the two samples and compare their means. As we can see, our samples are not perfectly normal (they are skewed to the right, among other things), and the means appear to be similar. In fact, ther seems to be a large amount of overlap between the two samples.

``` {r}
#density comparison
ggdensity(mydata, x = "Score",
          add = "mean", rug = TRUE,
          color = "Prompt", fill = "Prompt")
```

Next, we will run an independent samples t-test. Remember that if you want to learn the ins and outs of what a function in R can do, you can always use "?function_name" or "help(function_name").

``` {r}
t.test(Score~Prompt, alternative = 'two.sided', conf.level = .95, var.equal = TRUE, data = mydata)
```

Finally, we will check the effect size:

``` {r}
cohen.d(mydata,"Prompt")
```

Note that Cohen's (1988) recommendations for interpreting the effect size measure d suggest that d values between .20 and .49 are "small", values between .50 and .79 are "medium", and values above .8 are "large".

In this case, the effect size for Score (d = .099) is below the threshold for a "small" effect.

### Mann-Whitney __U__ test (Wilcoxon rank-sum test)
If your data do not meet the assumptions of the independent samples t-test, the Mann-Whitney __U__ test (also called a Wilcoxon rank-sum test) is an option.

Conducting the Mann-Whitney __U__ test is straightforward in R. Note that your continuous variable should come first, followed by your dichotomouse variable.

``` {r}
wilcox.test(Score~Prompt,data = mydata)
```

The test indicated that there are NO significant differences in Score between essays written in response to Prompt A and essays written in response to Prompt B.

Below, we will calculate the effect size. In this case, we will use the measure r, which can be interpreted using the same guidelines as correlations (.100 = small, .300 = medium, .600 = large)
```{r}
library(rcompanion) #don't forget to install if you haven't already
wilcoxonR(mydata$Score,mydata$Prompt)
```

As expected based on our previous calculations, the effect size is quite low (and is well below our threshold for a "small" effect.)

### Time for practice!
Now, determine whether there are differences between prompts for Nwords and Frequency. Don't forget to check for assumptions!