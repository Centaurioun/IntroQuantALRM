---
title: "Loading data, more practice with visualizing data"
author: "Kristopher Kyle"
date: "2/4/2019"
output: 
  html_document:
    code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Loading data, more practice with visualizing data

### Loading data
In previous tutorials, we have used dataframes that are part of the R base package or are part of ggplot2. Here, we will load data from a spreadsheet that is formatted as a comma separated values (.csv) document.

Our first step will be to open a new R script and save it in a convenient location (e.g., in a folder named "Rday3" on your desktop).

Our second step will be to save a copy of the target .csv file ("ICNALE_500_simple.csv") in that same folder.

Third, with our new R script open in RStudio, we will click on "Session" in the toolbar and "Set Working Directory"" to "Source File Location". This will let RStudio know where to look for your file(s).

Finally, we will load our target .csv file ("ICNALE_500_simple.csv") as a dataframe (and in this case we will call that dataframe "fundata"). NOTE- click on the "code" button to see the code used in each section. For this page, the default is for the code to be hidden.

```{r}
fundata <- read.csv("data/ICNALE_500_simple.csv", header = TRUE)
summary(fundata)
```

Based on the summary output, we see that our dataframe has four variables (Participant, Nationality, VST, Proficiency_CEFR, and Proficiency_Number).

These variable names represent the following:
- Participant: Participant identifier
- Nationality: Nationality of participant
- VST: Score on receptive vocabulary size test
- Proficiency_CEFR: Categorical proficiency rating based on the Common European Framework of Reference for Languges (CEFR)
- Proficiency_Number: CEFR rating converted to a numerical scale (ranging from 1 to 4)

### Visualizing the data

Lets apply what we learned in the last tutorial to this new data. Don't forget to load ggplot2!

```{r, results = "hide"}
library(ggplot2)
```

#### Scatterplots
First, lets create a scatterplot with a line of best fit to examine the relationship between VST (y-axis) and Proficiency_Number (x-axis).

```{r}
ggplot(data = fundata) + #this line indicates my dataset
  geom_point(mapping = aes(x = Proficiency_Number, y = VST)) + #this line sets the x and y axis
  geom_smooth(mapping = aes(x = Proficiency_Number, y = VST), method = lm)
```

Now try to make the following plot, which shows the data by nationality (hint, I also used geom_jitter()).

```{r}
ggplot(data = fundata) + #this line indicates my dataset
  geom_jitter(mapping = aes(x = Proficiency_Number, y = VST, color = Nationality)) + #this line sets the x and y axis
  geom_smooth(mapping = aes(x = Proficiency_Number, y = VST), method = lm)
```

Now, lets look at the trends by creating a different scatterplot for each (note that ncol = 3).

```{r}
ggplot(data = fundata) + #this line indicates my dataset
  geom_jitter(mapping = aes(x = Proficiency_Number, y = VST, color = Nationality)) + #this line sets the x and y axis
  geom_smooth(mapping = aes(x = Proficiency_Number, y = VST), method = lm) +
  facet_wrap(~ Nationality, ncol = 3)
```

#### Boxplots

Now, lets treat proficiency as a categorical variable. Create a graph with boxplots that shows the range of VST scores (y-axis) by Proficiency_CEFR (x-axis).

```{r}
ggplot(data = fundata) + 
  geom_boxplot(mapping = aes(x = Proficiency_CEFR, y = VST))
```

Now, lets remove the outliers in our base plot, and add the actual data points to the boxplot (vary the points by nationality).

```{r}
ggplot(data = fundata) + 
  geom_boxplot(mapping = aes(x = Proficiency_CEFR, y = VST), outlier.shape = NA) +
  geom_jitter(mapping = aes(x = Proficiency_CEFR, y = VST, color = Nationality), width = 0.2)
```
